{"ast":null,"code":"import _classCallCheck from\"/home/kyle/USAirsoftField/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kyle/USAirsoftField/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/kyle/USAirsoftField/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/kyle/USAirsoftField/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import AuthUserContext from'./context';import{withFirebase}from'../Firebase';var withAuthentication=function withAuthentication(Component){var WithAuthentication=/*#__PURE__*/function(_React$Component){_inherits(WithAuthentication,_React$Component);var _super=_createSuper(WithAuthentication);function WithAuthentication(props){var _this;_classCallCheck(this,WithAuthentication);_this=_super.call(this,props);_this.state={authUser:JSON.parse(localStorage.getItem('authUser'))};return _this;}_createClass(WithAuthentication,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.listener=this.props.firebase.onAuthUserListener(function(authUser){localStorage.setItem('authUser',JSON.stringify(authUser));_this2.setState({authUser:authUser});},function(){localStorage.removeItem('authUser');_this2.setState({authUser:null});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.listener();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(AuthUserContext.Provider,{value:this.state.authUser},/*#__PURE__*/React.createElement(Component,this.props));}}]);return WithAuthentication;}(React.Component);return withFirebase(WithAuthentication);};export default withAuthentication;","map":{"version":3,"sources":["/home/kyle/USAirsoftField/src/components/session/withAuthentication.js"],"names":["React","AuthUserContext","withFirebase","withAuthentication","Component","WithAuthentication","props","state","authUser","JSON","parse","localStorage","getItem","listener","firebase","onAuthUserListener","setItem","stringify","setState","removeItem"],"mappings":"gjBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,eAAP,KAA4B,WAA5B,CACA,OAASC,YAAT,KAA6B,aAA7B,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,SAAS,CAAI,IAC9BC,CAAAA,kBAD8B,oIAEhC,4BAAYC,KAAZ,CAAmB,oDACf,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADD,CAAb,CAHe,aAMlB,CAR+B,4FAUZ,iBAChB,KAAKC,QAAL,CAAgB,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,kBAApB,CACZ,SAAAP,QAAQ,CAAI,CACRG,YAAY,CAACK,OAAb,CAAqB,UAArB,CAAiCP,IAAI,CAACQ,SAAL,CAAeT,QAAf,CAAjC,EACA,MAAI,CAACU,QAAL,CAAc,CAAEV,QAAQ,CAARA,QAAF,CAAd,EACH,CAJW,CAKZ,UAAM,CACFG,YAAY,CAACQ,UAAb,CAAwB,UAAxB,EACA,MAAI,CAACD,QAAL,CAAc,CAAEV,QAAQ,CAAE,IAAZ,CAAd,EACH,CARW,CAAhB,CAUH,CArB+B,mEAuBT,CACnB,KAAKK,QAAL,GACH,CAzB+B,uCA2BvB,CACL,mBACI,oBAAC,eAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAE,KAAKN,KAAL,CAAWC,QAA5C,eACI,oBAAC,SAAD,CAAe,KAAKF,KAApB,CADJ,CADJ,CAKH,CAjC+B,gCACHN,KAAK,CAACI,SADH,EAoCpC,MAAOF,CAAAA,YAAY,CAACG,kBAAD,CAAnB,CACH,CArCD,CAuCA,cAAeF,CAAAA,kBAAf","sourcesContent":["import React from 'react';\n\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\n\nconst withAuthentication = Component => {\n    class WithAuthentication extends React.Component {\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                authUser: JSON.parse(localStorage.getItem('authUser')),\n            };\n        }\n\n        componentDidMount() {\n            this.listener = this.props.firebase.onAuthUserListener(\n                authUser => {\n                    localStorage.setItem('authUser', JSON.stringify(authUser));\n                    this.setState({ authUser });\n                },\n                () => {\n                    localStorage.removeItem('authUser');\n                    this.setState({ authUser: null });\n                },\n            );\n        }\n\n        componentWillUnmount() {\n            this.listener();\n        }\n\n        render() {\n            return (\n                <AuthUserContext.Provider value={this.state.authUser}>\n                    <Component {...this.props} />\n                </AuthUserContext.Provider>\n            );\n        }\n    }\n\n    return withFirebase(WithAuthentication);\n};\n\nexport default withAuthentication;"]},"metadata":{},"sourceType":"module"}